{"ast":null,"code":"import { create } from \"zustand\";\nimport { persist, createJSONStorage } from \"zustand/middleware\";\nimport { userStore } from \"./UserStore\";\n\n// Define a store\nexport const categoryStore = create(persist(set => ({\n  categories: [],\n  setCategories: categories => {\n    console.log(\"Categorias armazenadas:\", categories);\n    set({\n      categories\n    });\n  },\n  // Função para adicionar uma nova categoria\n  addCategory: category => {\n    console.log(\"Adicionando categoria:\", category);\n    set(state => ({\n      categories: [...state.categories, category]\n    }));\n  },\n  // Função para editar uma categoria existente\n  editCategory: (oldCategory, updatedCategory) => {\n    console.log(\"Editando categoria:\", oldCategory, updatedCategory);\n    set(state => ({\n      categories: state.categories.map(category => category === oldCategory ? updatedCategory : category)\n    }));\n  },\n  // Função para excluir uma categoria\n  deleteCategory: deleteCategory => {\n    console.log(\"Excluindo categoria:\", deleteCategory);\n    set(state => ({\n      categories: state.categories.filter(category => category !== deleteCategory)\n    }));\n  },\n  fetchCategories: async () => {\n    try {\n      const response = await fetch(\"http://localhost:8080/project_backend/rest/users/categories\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          token: userStore.getState().token\n        }\n      });\n      if (response.ok) {\n        const categories = await response.json();\n        set({\n          categories: categories.map(category => category.name)\n        });\n      } else {\n        console.error(\"Failed to fetch categories:\", response.statusText);\n      }\n    } catch (error) {\n      console.error(\"Error fetching categories:\", error);\n    }\n  }\n}), {\n  name: \"categoryStore\",\n  storage: createJSONStorage(() => sessionStorage)\n}));","map":{"version":3,"names":["create","persist","createJSONStorage","userStore","categoryStore","set","categories","setCategories","console","log","addCategory","category","state","editCategory","oldCategory","updatedCategory","map","deleteCategory","filter","fetchCategories","response","fetch","method","headers","token","getState","ok","json","name","error","statusText","storage","sessionStorage"],"sources":["D:/AoR/41.Projeto4/projecto4frontend/src/stores/CategoryStore.jsx"],"sourcesContent":["import { create } from \"zustand\";\r\nimport { persist, createJSONStorage } from \"zustand/middleware\";\r\nimport { userStore } from \"./UserStore\";\r\n\r\n// Define a store\r\nexport const categoryStore = create(\r\n    persist(\r\n        (set) => ({\r\n            categories: [],\r\n            setCategories: (categories) => {\r\n                console.log(\"Categorias armazenadas:\", categories);\r\n                set({ categories });\r\n            },\r\n            // Função para adicionar uma nova categoria\r\n            addCategory: (category) => {\r\n                console.log(\"Adicionando categoria:\", category);\r\n                set((state) => ({\r\n                    categories: [...state.categories, category],\r\n                }));\r\n            },\r\n            // Função para editar uma categoria existente\r\n            editCategory: (oldCategory, updatedCategory) => {\r\n                console.log(\"Editando categoria:\", oldCategory, updatedCategory);\r\n                set((state) => ({\r\n                    categories: state.categories.map((category) =>\r\n                        category === oldCategory ? updatedCategory : category\r\n                    ),\r\n                }));\r\n            },\r\n            // Função para excluir uma categoria\r\n            deleteCategory: (deleteCategory) => {\r\n                console.log(\"Excluindo categoria:\", deleteCategory);\r\n                set((state) => ({\r\n                    categories: state.categories.filter((category) => category !== deleteCategory),\r\n                }));\r\n            },\r\n            fetchCategories: async () => {\r\n                try {\r\n                    const response = await fetch(\"http://localhost:8080/project_backend/rest/users/categories\", {\r\n                        method: \"GET\",\r\n                        headers: {\r\n                            \"Content-Type\": \"application/json\",\r\n                            token: userStore.getState().token,\r\n                        },\r\n                    });\r\n                    if (response.ok) {\r\n                        const categories = await response.json();\r\n                        set({ categories: categories.map(category => category.name) });\r\n                    } else {\r\n                        console.error(\"Failed to fetch categories:\", response.statusText);\r\n                    }\r\n                } catch (error) {\r\n                    console.error(\"Error fetching categories:\", error);\r\n                }\r\n            },\r\n        }),\r\n        {\r\n            name: \"categoryStore\",\r\n            storage: createJSONStorage(() => sessionStorage),\r\n        }\r\n    )\r\n);\r\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,SAAS;AAChC,SAASC,OAAO,EAAEC,iBAAiB,QAAQ,oBAAoB;AAC/D,SAASC,SAAS,QAAQ,aAAa;;AAEvC;AACA,OAAO,MAAMC,aAAa,GAAGJ,MAAM,CAC/BC,OAAO,CACFI,GAAG,KAAM;EACNC,UAAU,EAAE,EAAE;EACdC,aAAa,EAAGD,UAAU,IAAK;IAC3BE,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEH,UAAU,CAAC;IAClDD,GAAG,CAAC;MAAEC;IAAW,CAAC,CAAC;EACvB,CAAC;EACD;EACAI,WAAW,EAAGC,QAAQ,IAAK;IACvBH,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEE,QAAQ,CAAC;IAC/CN,GAAG,CAAEO,KAAK,KAAM;MACZN,UAAU,EAAE,CAAC,GAAGM,KAAK,CAACN,UAAU,EAAEK,QAAQ;IAC9C,CAAC,CAAC,CAAC;EACP,CAAC;EACD;EACAE,YAAY,EAAEA,CAACC,WAAW,EAAEC,eAAe,KAAK;IAC5CP,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEK,WAAW,EAAEC,eAAe,CAAC;IAChEV,GAAG,CAAEO,KAAK,KAAM;MACZN,UAAU,EAAEM,KAAK,CAACN,UAAU,CAACU,GAAG,CAAEL,QAAQ,IACtCA,QAAQ,KAAKG,WAAW,GAAGC,eAAe,GAAGJ,QACjD;IACJ,CAAC,CAAC,CAAC;EACP,CAAC;EACD;EACAM,cAAc,EAAGA,cAAc,IAAK;IAChCT,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEQ,cAAc,CAAC;IACnDZ,GAAG,CAAEO,KAAK,KAAM;MACZN,UAAU,EAAEM,KAAK,CAACN,UAAU,CAACY,MAAM,CAAEP,QAAQ,IAAKA,QAAQ,KAAKM,cAAc;IACjF,CAAC,CAAC,CAAC;EACP,CAAC;EACDE,eAAe,EAAE,MAAAA,CAAA,KAAY;IACzB,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,6DAA6D,EAAE;QACxFC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClCC,KAAK,EAAErB,SAAS,CAACsB,QAAQ,CAAC,CAAC,CAACD;QAChC;MACJ,CAAC,CAAC;MACF,IAAIJ,QAAQ,CAACM,EAAE,EAAE;QACb,MAAMpB,UAAU,GAAG,MAAMc,QAAQ,CAACO,IAAI,CAAC,CAAC;QACxCtB,GAAG,CAAC;UAAEC,UAAU,EAAEA,UAAU,CAACU,GAAG,CAACL,QAAQ,IAAIA,QAAQ,CAACiB,IAAI;QAAE,CAAC,CAAC;MAClE,CAAC,MAAM;QACHpB,OAAO,CAACqB,KAAK,CAAC,6BAA6B,EAAET,QAAQ,CAACU,UAAU,CAAC;MACrE;IACJ,CAAC,CAAC,OAAOD,KAAK,EAAE;MACZrB,OAAO,CAACqB,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;IACtD;EACJ;AACJ,CAAC,CAAC,EACF;EACID,IAAI,EAAE,eAAe;EACrBG,OAAO,EAAE7B,iBAAiB,CAAC,MAAM8B,cAAc;AACnD,CACJ,CACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}