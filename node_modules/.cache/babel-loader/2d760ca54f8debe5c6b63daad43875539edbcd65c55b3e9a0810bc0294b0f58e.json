{"ast":null,"code":"import { create } from \"zustand\";\nimport { persist, createJSONStorage } from \"zustand/middleware\";\nimport { userStore } from \"./UserStore\";\nexport const taskStore = create(persist(set => ({\n  id: null,\n  title: \"\",\n  description: \"\",\n  stateId: 0,\n  priority: 0,\n  startDate: null,\n  limitDate: null,\n  category: \"\",\n  erased: false,\n  owner: {\n    id: null,\n    name: \"\"\n  },\n  updateId: id => set({\n    id\n  }),\n  updateTitle: title => set({\n    title\n  }),\n  updateDescription: description => set({\n    description\n  }),\n  updateStateId: stateId => set({\n    stateId\n  }),\n  updatePriority: priority => set({\n    priority\n  }),\n  updateStartDate: startDate => set({\n    startDate\n  }),\n  updateLimitDate: limitDate => set({\n    limitDate\n  }),\n  updateCategory: category => set({\n    category\n  }),\n  // Atualiza apenas o atributo category\n  updateErased: erased => set({\n    erased\n  }),\n  filterTasksByCategory: category => {\n    const tasks = taskStore.getState().tasks;\n    return tasks.filter(task => task.category === category);\n  },\n  tasks: [],\n  setTasks: tasks => {\n    console.log(\"Tarefas armazenadas:\", tasks);\n    set({\n      tasks\n    });\n  },\n  fetchTasks: async () => {\n    try {\n      const response = await fetch(\"http://localhost:8080/project_backend/rest/users/tasks\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          token: userStore.getState().token\n        }\n      });\n      if (response.ok) {\n        const tasks = await response.json();\n        console.log(\"Tarefas recebidas:\", tasks);\n        set({\n          tasks\n        });\n        console.log(\"Tarefas armazenadas no fetch:\", tasks);\n      } else {\n        console.error(\"Failed to fetch tasks:\", response.statusText);\n      }\n    } catch (error) {\n      console.error(\"Error fetching tasks:\", error);\n    }\n  }\n}), {\n  name: \"taskStore\",\n  storage: createJSONStorage(() => sessionStorage)\n}));","map":{"version":3,"names":["create","persist","createJSONStorage","userStore","taskStore","set","id","title","description","stateId","priority","startDate","limitDate","category","erased","owner","name","updateId","updateTitle","updateDescription","updateStateId","updatePriority","updateStartDate","updateLimitDate","updateCategory","updateErased","filterTasksByCategory","tasks","getState","filter","task","setTasks","console","log","fetchTasks","response","fetch","method","headers","token","ok","json","error","statusText","storage","sessionStorage"],"sources":["D:/AoR/41.Projeto4/projecto4frontend/src/stores/TaskStore.jsx"],"sourcesContent":["import { create } from \"zustand\";\r\nimport { persist, createJSONStorage } from \"zustand/middleware\";\r\nimport { userStore } from \"./UserStore\";\r\n\r\nexport const taskStore = create(\r\n    persist(\r\n        (set) => ({\r\n            id: null,\r\n            title: \"\",\r\n            description: \"\",\r\n            stateId: 0,\r\n            priority: 0,\r\n            startDate: null,\r\n            limitDate: null,\r\n            category: \"\",\r\n            erased: false,\r\n            owner: { id: null, name: \"\" },\r\n\r\n            updateId: (id) => set({ id }),\r\n            updateTitle: (title) => set({ title }),\r\n            updateDescription: (description) => set({ description }),\r\n            updateStateId: (stateId) => set({ stateId }),\r\n            updatePriority: (priority) => set({ priority }),\r\n            updateStartDate: (startDate) => set({ startDate }),\r\n            updateLimitDate: (limitDate) => set({ limitDate }),\r\n            updateCategory: (category) => set({ category }), // Atualiza apenas o atributo category\r\n            updateErased: (erased) => set({ erased }),\r\n\r\n            filterTasksByCategory: (category) => {\r\n                const tasks = taskStore.getState().tasks;\r\n                return tasks.filter(task => task.category === category);\r\n            },\r\n\r\n            tasks: [],\r\n            setTasks: (tasks) => {\r\n                console.log(\"Tarefas armazenadas:\", tasks);\r\n                set({ tasks });\r\n            },\r\n            fetchTasks: async () => {\r\n                try {\r\n                    const response = await fetch(\"http://localhost:8080/project_backend/rest/users/tasks\", {\r\n                        method: \"GET\",\r\n                        headers: {\r\n                            \"Content-Type\": \"application/json\",\r\n                            token: userStore.getState().token,\r\n                        },\r\n                    });\r\n                    if (response.ok) {\r\n                        const tasks = await response.json();\r\n                        console.log(\"Tarefas recebidas:\", tasks);\r\n                        set({ tasks });\r\n                        console.log(\"Tarefas armazenadas no fetch:\", tasks);\r\n                    } else {\r\n                        console.error(\"Failed to fetch tasks:\", response.statusText);\r\n                    }\r\n                } catch (error) {\r\n                    console.error(\"Error fetching tasks:\", error);\r\n                }\r\n            }\r\n        }),\r\n        {\r\n            name: \"taskStore\",\r\n            storage: createJSONStorage(() => sessionStorage),\r\n        }\r\n    )\r\n);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}